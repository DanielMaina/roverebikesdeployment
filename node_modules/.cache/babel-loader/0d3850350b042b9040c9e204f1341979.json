{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useReducer, useMemo, useCallback } from 'react';\n\nconst combineState = model => Object.fromEntries(Object.keys(model).map(key => [key, model[key].state]));\n\nconst defaultReducer = (state, action) => state;\n\nconst rootReducer = model => (state, action) => {\n  const [key, ...rest] = action.type.split('/');\n  if (!model[key]) return defaultReducer(state, action);\n  return { ...state,\n    [`${key}`]: action.data.reducer(state, state[key], action.data.payload)\n  };\n};\n\nconst useStore = model => {\n  _s();\n\n  const [state, storeDispatch] = useReducer(rootReducer(model), combineState(model));\n  const store = useMemo(() => ({\n    state,\n    dispatch: storeDispatch\n  }), [state]);\n  const dispatch = useCallback(model => {\n    return Object.fromEntries(Object.keys(model).map(key => [key, Object.fromEntries(Object.keys(model[key].reducer).map(reducerKey => [reducerKey, data => storeDispatch({\n      type: `${key}`,\n      data: {\n        payload: data,\n        reducer: model[key].reducer[reducerKey]\n      }\n    })]))]));\n  }, []);\n  const asyncDispatch = useCallback(model => {\n    return Object.fromEntries(Object.keys(model).map(key => [key, Object.fromEntries(Object.keys(model[key].asyncReducer).map(reducerKey => [reducerKey, async data => await model[key].asyncReducer[reducerKey](state, state[key], data, {\n      sync: dispatch(model),\n      async: asyncDispatch(model)\n    })]))]));\n  }, []);\n  const selector = useCallback(model => {\n    return Object.fromEntries(Object.keys(model).map(key => [key, Object.fromEntries(Object.keys(model[key].selector).map(reducerKey => [reducerKey, data => model[key].selector[reducerKey](state, state[key], data)]))]));\n  }, [state]);\n  const asyncSelector = useCallback(model => {\n    return Object.fromEntries(Object.keys(model).map(key => [key, Object.fromEntries(Object.keys(model[key].asyncSelector).map(reducerKey => [reducerKey, async data => await model[key].asyncSelector[reducerKey](state, state[key], data)]))]));\n  }, [state]);\n  return {\n    store,\n    dispatch: dispatch(model),\n    asyncDispatch: asyncDispatch(model),\n    selector: selector(model),\n    asyncSelector: asyncSelector(model)\n  };\n};\n\n_s(useStore, \"phnQed5cEQI/jWg3alEOErut27k=\");\n\nexport default useStore;","map":{"version":3,"sources":["/Users/andrewsordier/Desktop/Project/roverebikesdeployment/src/lib/hooks/useStore.jsx"],"names":["React","useReducer","useMemo","useCallback","combineState","model","Object","fromEntries","keys","map","key","state","defaultReducer","action","rootReducer","rest","type","split","data","reducer","payload","useStore","storeDispatch","store","dispatch","reducerKey","asyncDispatch","asyncReducer","sync","async","selector","asyncSelector"],"mappings":"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","sourcesContent":["import React, { useReducer, useMemo, useCallback } from 'react';\n\n\nconst combineState = (model) => Object.fromEntries(Object.keys(model).map(((key) => [\n    key,\n    model[key].state\n])));\n\nconst defaultReducer = (state, action) => state\n\nconst rootReducer = (model) => (state, action) => {\n    const [key, ...rest] = action.type.split('/')\n    if (!model[key]) return defaultReducer(state, action)\n    return {\n        ...state,\n        [`${key}`]: action.data.reducer(state, state[key], action.data.payload)\n    }\n}\n\nconst useStore = (model) => {\n    const [state, storeDispatch] = useReducer(rootReducer(model), combineState(model));\n    const store = useMemo(() => ({\n        state,\n        dispatch: storeDispatch\n    }), [state]);\n\n    const dispatch = useCallback((model) => {\n        return Object.fromEntries(Object.keys(model).map(((key) => [\n            key,\n            Object.fromEntries(Object.keys(model[key].reducer).map(((reducerKey) => [\n                reducerKey,\n                (data) => storeDispatch({\n                    type: `${key}`, data:\n                    {\n                        payload: data,\n                        reducer: model[key].reducer[reducerKey]\n                    }\n                })\n\n            ])))\n\n        ])))\n    }, [])\n\n    const asyncDispatch = useCallback((model) => {\n        return Object.fromEntries(Object.keys(model).map(((key) => [\n            key,\n            Object.fromEntries(Object.keys(model[key].asyncReducer).map(((reducerKey) => [\n                reducerKey,\n                async (data) => await model[key].asyncReducer[reducerKey](state, state[key], data, {\n                    sync: dispatch(model),\n                    async: asyncDispatch(model)\n                }\n                )\n            ])))\n\n        ])))\n    }, [])\n\n    const selector = useCallback((model) => {\n        return Object.fromEntries(Object.keys(model).map(((key) => [\n            key,\n            Object.fromEntries(Object.keys(model[key].selector).map(((reducerKey) => [\n                reducerKey,\n                (data) => model[key].selector[reducerKey](state, state[key], data)\n            ])))\n\n        ])))\n    }, [state])\n\n    const asyncSelector = useCallback((model) => {\n        return Object.fromEntries(Object.keys(model).map(((key) => [\n            key,\n            Object.fromEntries(Object.keys(model[key].asyncSelector).map(((reducerKey) => [\n                reducerKey,\n                async (data) => await model[key].asyncSelector[reducerKey](state, state[key], data)\n            ])))\n\n        ])))\n    }, [state])\n\n    return {\n        store,\n        dispatch: dispatch(model),\n        asyncDispatch: asyncDispatch(model),\n        selector: selector(model),\n        asyncSelector: asyncSelector(model),\n    }\n}\n\nexport default useStore"]},"metadata":{},"sourceType":"module"}